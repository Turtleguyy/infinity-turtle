(function(){var t;t=function(){function t(t,o){this.data=t,this._options=$.extend({},this.defaults,o),this.view=$(this._options.container),this.promise=$.Deferred(),this._page=0,this._buildLoader(),this._loadNextPage(0)}return t.prototype.defaults={container:"body",loaderColor:"#ddddff",loaderClass:"",loaderSymbol:"infinity",loaderWidth:"2px",pageSize:10,scrollDelay:50,scrollView:"body"},t.prototype.hideLoader=function(t){return null==t&&(t=!1),t?this._loader.fadeOut():this._loader.hide()},t.prototype._buildLoader=function(){var t,o;return o=""+this._options.loaderSymbol+" "+this._options.loaderClass,o="class='infinite-loader "+o+"'",t="border-width: "+this._options.loaderWidth+";",this._loader=function(){switch(this._options.loaderSymbol){case"infinity":return this._buildInfinityLoader(t,o);default:return this._buildCircleLoader(t)}}.call(this)},t.prototype._buildInfinityLoader=function(t,o){var i,e;return i="border-color: "+this._options.loaderColor+";",e="<div "+o+" style='"+i+"'>\n  <div class='left' style='"+t+"' />\n  <div class='right' style='"+t+"' />\n</div>",$(e).appendTo(this.view)},t.prototype._buildCircleLoader=function(t,o){var i,e,r;return e="border-top-color: "+this._options.loaderColor+";",i="border-left-color: "+this._options.loaderColor+";",r="style='"+t+" "+e+" "+i+"'",$("<div "+o+" "+r+" />").appendTo(this.view)},t.prototype._checkScrollPosition=function(){var t,o;return t=this.view.children(":last-child"),o=t.position().top+t.outerHeight(!0),o-=this.view.offset().top,o===this.view.height()?(this.view.append(this._loader.show()),this.view.off("scroll"),this._loadNextPage()):void 0},t.prototype._loadNextPage=function(t){var o,i;return this._page+=1,o=this._options.pageSize*(this._page-1),i=this.data.slice(o,this._options.pageSize+o),i.length<this._options.pageSize?this._sendPageData(!0,i,t):this._sendPageData(!1,i,t)},t.prototype._sendPageData=function(t,o,i){return null==i&&(i="infinity"===this._options.loaderSymbol?900:500),setTimeout(function(i){return function(){return i.hideLoader(),t?i.promise.resolve(o):(i.promise.notify(o),$(i._options.scrollView).on("scroll",$.proxy(i,"_onContainerScroll")))}}(this),i)},t.prototype._onContainerScroll=function(){return clearTimeout(this._timeout),this._timeout=setTimeout(function(t){return function(){return t._checkScrollPosition()}}(this),this._options.scrollDelay)},t}(),window.InfinityTurtle=t}).call(this);
